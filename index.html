<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Xizmat Tanlash</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="top-bar">
    <h2 id="title">Kalkulyator</h2>
    <div class="controls">
<<<<<<< HEAD
      <select id="languageSelect" onchange="changeLang(this.value)">
        <option value="uz">🇺🇿</option>
        <option value="ru">🇷🇺</option>
        <option value="en">en</option>
      </select>
=======
      <button class="toggle-lang" onclick="toggleLang()">🇺🇿/🇷🇺</button>
>>>>>>> 446a5049e804ffc71a06113b537894675ca18d98
      <button class="toggle-mode" onclick="toggleMode()">🌙</button>
    </div>
  </div>

  <div class="menu" id="mainMenu">
    <h2 id="menuTitle">Xizmatni tanlang:</h2>
<<<<<<< HEAD
    <button onclick="showSection('calc')" id="calcBtn">🔢 Kalkulyator</button>
    <button onclick="showSection('convert')" id="convertBtn">💱 Valyuta Konvertori</button>
  </div>

  <div class="calculator" id="calculator" style="display:none;">
    <h2 id="titleCalc">Kalkulyator</h2>
=======
    <button onclick="showSection('calc')">🔢 Kalkulyator</button>
    <button onclick="showSection('convert')">💱 Valyuta Konvertori</button>
  </div>

  <div class="calculator" id="calculator" style="display:none;">
    <h2 id="title">Kalkulyator</h2>
>>>>>>> 446a5049e804ffc71a06113b537894675ca18d98
    <input type="number" id="num1" placeholder="1-son" />
    <input type="number" id="num2" placeholder="2-son" />
    <select id="operation">
      <option value="add">➕ Qo‘shish</option>
      <option value="subtract">➖ Ayirish</option>
      <option value="multiply">✖️ Ko‘paytirish</option>
      <option value="divide">➗ Bo‘lish</option>
    </select>
    <button onclick="calculate()" id="calculateBtn">Hisobla</button>
    <div id="result" class="result"></div>
    <div id="history" class="history"></div>
<<<<<<< HEAD
    <button onclick="clearHistory()" id="clearHistoryBtn">🧹 Tarixni tozalash</button>
    <button onclick="backToMenu()" id="backBtn">⬅️ Ortga</button>
=======
    <button onclick="clearHistory()">🧹 Tarixni tozalash</button>
    <button onclick="backToMenu()">⬅️ Ortga</button>
>>>>>>> 446a5049e804ffc71a06113b537894675ca18d98
  </div>

  <div class="calculator" id="converter" style="display:none;">
    <h2 id="converterTitle">Valyuta Konvertori</h2>
    <input type="number" id="amount" placeholder="Miqdor" />
    <select id="fromCurrency"></select>
    <select id="toCurrency"></select>
<<<<<<< HEAD
    <button onclick="convertCurrency()" id="convertButton">Konvertatsiya</button>
    <div id="convertedResult" class="result"></div>
    <button onclick="backToMenu()" id="backBtn2">⬅️ Ortga</button>
=======
    <button onclick="convertCurrency()">Konvertatsiya</button>
    <div id="convertedResult" class="result"></div>
    <div id="topRates" class="history"></div>
    <button onclick="backToMenu()">⬅️ Ortga</button>
>>>>>>> 446a5049e804ffc71a06113b537894675ca18d98
  </div>

  <div class="footer" id="footer">Created by Khamidkhanov Muhammadzohid</div>
  <audio id="clickSound" src="click.mp3" preload="auto"></audio>

  <script>
    let currentLang = 'uz';
    const sound = document.getElementById("clickSound");
    const historyArr = [];
    let exchangeRates = {};

<<<<<<< HEAD
    const texts = {
      uz: {
        service: "Xizmatni tanlang:",
        calculator: "Kalkulyator",
        converter: "Valyuta Konvertori",
        calculate: "Hisobla",
        clearHistory: "🧹 Tarixni tozalash",
        back: "⬅️ Ortga",
        result: "Natija",
        history: "Tarix",
        amount: "Miqdor",
        created: "Created by Khamidkhanov Muhammadzohid",
        add: "➕ Qo‘shish",
        subtract: "➖ Ayirish",
        multiply: "✖️ Ko‘paytirish",
        divide: "➗ Bo‘lish",
        convert: "Konvertatsiya"
      },
      ru: {
        service: "Выберите услугу:",
        calculator: "Калькулятор",
        converter: "Конвертер Валют",
        calculate: "Вычислить",
        clearHistory: "🧹 Очистить историю",
        back: "⬅️ Назад",
        result: "Результат",
        history: "История",
        amount: "Сумма",
        created: "Создано: Хамидханов Мухаммадзохид",
        add: "➕ Сложение",
        subtract: "➖ Вычитание",
        multiply: "✖️ Умножение",
        divide: "➗ Деление",
        convert: "Конвертировать"
      },
      en: {
        service: "Choose a service:",
        calculator: "Calculator",
        converter: "Currency Converter",
        calculate: "Calculate",
        clearHistory: "🧹 Clear History",
        back: "⬅️ Back",
        result: "Result",
        history: "History",
        amount: "Amount",
        created: "Created by Khamidkhanov Muhammadzohid",
        add: "➕ Add",
        subtract: "➖ Subtract",
        multiply: "✖️ Multiply",
        divide: "➗ Divide",
        convert: "Convert"
      }
    };

    function changeLang(lang) {
      currentLang = lang;
      const t = texts[lang];
      document.getElementById('menuTitle').textContent = t.service;
      document.getElementById('calcBtn').textContent = `🔢 ${t.calculator}`;
      document.getElementById('convertBtn').textContent = `💱 ${t.converter}`;
      document.getElementById('title').textContent = t.calculator;
      document.getElementById('titleCalc').textContent = t.calculator;
      document.getElementById('converterTitle').textContent = t.converter;
      document.getElementById('calculateBtn').textContent = t.calculate;
      document.getElementById('clearHistoryBtn').textContent = t.clearHistory;
      document.getElementById('backBtn').textContent = t.back;
      document.getElementById('backBtn2').textContent = t.back;
      document.getElementById('convertButton').textContent = t.convert;
      document.getElementById('amount').placeholder = t.amount;
      document.getElementById('footer').textContent = t.created;

      const op = document.getElementById('operation').options;
      op[0].text = t.add;
      op[1].text = t.subtract;
      op[2].text = t.multiply;
      op[3].text = t.divide;
=======
    async function fetchRates() {
      const response = await fetch('https://v6.exchangerate-api.com/v6/b619ef166163799d5ee3d2b9/latest/USD');
      const data = await response.json();
      exchangeRates = data.conversion_rates;
      populateCurrencyDropdowns();
      showTopRates();
    }

    function populateCurrencyDropdowns() {
      const fromSelect = document.getElementById("fromCurrency");
      const toSelect = document.getElementById("toCurrency");
      fromSelect.innerHTML = toSelect.innerHTML = "";
      for (let code in exchangeRates) {
        fromSelect.innerHTML += `<option value="${code}">${code}</option>`;
        toSelect.innerHTML += `<option value="${code}">${code}</option>`;
      }
      fromSelect.value = 'UZS';
      toSelect.value = 'USD';
    }

    function showTopRates() {
      const topDiv = document.getElementById("topRates");
      let top10 = Object.entries(exchangeRates).slice(0, 10);
      topDiv.innerHTML = `<strong>Top 10 kurslar (USD asosida):</strong><br>` +
        top10.map(([code, rate]) => `${code}: ${rate}`).join("<br>");
>>>>>>> 446a5049e804ffc71a06113b537894675ca18d98
    }

    function toggleMode() {
      document.body.classList.toggle("dark-mode");
    }

<<<<<<< HEAD
=======
    function toggleLang() {
      currentLang = currentLang === 'uz' ? 'ru' : 'uz';
      document.getElementById('menuTitle').textContent = currentLang === 'uz' ? 'Xizmatni tanlang:' : 'Выберите услугу:';
      document.getElementById('title').textContent = currentLang === 'uz' ? 'Kalkulyator' : 'Калькулятор';
      document.getElementById('converterTitle').textContent = currentLang === 'uz' ? 'Valyuta Konvertori' : 'Конвертер Валют';
      document.getElementById('num1').placeholder = currentLang === 'uz' ? '1-son' : '1-число';
      document.getElementById('num2').placeholder = currentLang === 'uz' ? '2-son' : '2-число';
      document.getElementById('calculateBtn').textContent = currentLang === 'uz' ? 'Hisobla' : 'Вычислить';
      document.getElementById('amount').placeholder = currentLang === 'uz' ? 'Miqdor' : 'Сумма';
      document.getElementById('footer').textContent = currentLang === 'uz' ? 'Created by Khamidkhanov Muhammadzohid' : 'Создано: Хамидханов Мухаммадзохид';
      const op = document.getElementById('operation').options;
      op[0].text = currentLang === 'uz' ? '➕ Qo‘shish' : '➕ Сложение';
      op[1].text = currentLang === 'uz' ? '➖ Ayirish' : '➖ Вычитание';
      op[2].text = currentLang === 'uz' ? '✖️ Ko‘paytirish' : '✖️ Умножение';
      op[3].text = currentLang === 'uz' ? '➗ Bo‘lish' : '➗ Деление';
    }

>>>>>>> 446a5049e804ffc71a06113b537894675ca18d98
    function showSection(type) {
      document.getElementById("mainMenu").style.display = "none";
      document.getElementById("calculator").style.display = type === 'calc' ? "block" : "none";
      document.getElementById("converter").style.display = type === 'convert' ? "block" : "none";
    }

    function backToMenu() {
      document.getElementById("mainMenu").style.display = "block";
      document.getElementById("calculator").style.display = "none";
      document.getElementById("converter").style.display = "none";
    }

    async function calculate() {
      try { await sound.play(); } catch {}
      const num1 = parseFloat(document.getElementById("num1").value);
      const num2 = parseFloat(document.getElementById("num2").value);
      const op = document.getElementById("operation").value;
      let result;
      switch(op) {
        case 'add': result = num1 + num2; break;
        case 'subtract': result = num1 - num2; break;
        case 'multiply': result = num1 * num2; break;
        case 'divide': result = num2 !== 0 ? num1 / num2 : '∞'; break;
      }
<<<<<<< HEAD
      const resText = `${texts[currentLang].result}: ${result}`;
      document.getElementById("result").textContent = resText;
      historyArr.unshift(`${num1} ${getSymbol(op)} ${num2} = ${result}`);
      document.getElementById("history").innerHTML = `<strong>${texts[currentLang].history}:</strong><br>` + historyArr.slice(0, 10).join("<br>");
=======
      const resText = `${currentLang === 'uz' ? 'Natija' : 'Результат'}: ${result}`;
      document.getElementById("result").textContent = resText;
      historyArr.unshift(`${num1} ${getSymbol(op)} ${num2} = ${result}`);
      document.getElementById("history").innerHTML =
        `<strong>${currentLang === 'uz' ? 'Tarix' : 'История'}:</strong><br>` +
        historyArr.slice(0, 10).join("<br>");
>>>>>>> 446a5049e804ffc71a06113b537894675ca18d98
    }

    function getSymbol(op) {
      return { add: '+', subtract: '−', multiply: '×', divide: '÷' }[op];
    }

    function clearHistory() {
      historyArr.length = 0;
      document.getElementById("history").innerHTML = "";
    }

<<<<<<< HEAD
    async function fetchRates() {
      const response = await fetch('https://v6.exchangerate-api.com/v6/b619ef166163799d5ee3d2b9/latest/USD');
      const data = await response.json();
      exchangeRates = data.conversion_rates;
      populateCurrencyDropdowns();
    }

    function populateCurrencyDropdowns() {
      const fromSelect = document.getElementById("fromCurrency");
      const toSelect = document.getElementById("toCurrency");
      fromSelect.innerHTML = toSelect.innerHTML = "";
      for (let code in exchangeRates) {
        fromSelect.innerHTML += `<option value="${code}">${code}</option>`;
        toSelect.innerHTML += `<option value="${code}">${code}</option>`;
      }
      fromSelect.value = 'UZS';
      toSelect.value = 'USD';
    }

=======
>>>>>>> 446a5049e804ffc71a06113b537894675ca18d98
    function convertCurrency() {
      const amount = parseFloat(document.getElementById("amount").value);
      const from = document.getElementById("fromCurrency").value;
      const to = document.getElementById("toCurrency").value;
      if (!exchangeRates[from] || !exchangeRates[to]) return;
      const usdAmount = amount / exchangeRates[from];
      const converted = usdAmount * exchangeRates[to];
<<<<<<< HEAD
      document.getElementById("convertedResult").textContent = `${texts[currentLang].result}: ${converted.toFixed(2)} ${to}`;
=======
      document.getElementById("convertedResult").textContent = `${currentLang === 'uz' ? 'Natija' : 'Результат'}: ${converted.toFixed(2)} ${to}`;
>>>>>>> 446a5049e804ffc71a06113b537894675ca18d98
    }

    window.onload = fetchRates;
  </script>
</body>
<<<<<<< HEAD
</html>
=======
</html>
>>>>>>> 446a5049e804ffc71a06113b537894675ca18d98
